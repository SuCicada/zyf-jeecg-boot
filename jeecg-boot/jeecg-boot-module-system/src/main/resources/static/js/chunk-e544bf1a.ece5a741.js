(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e544bf1a","chunk-2d0df437","chunk-2d0df437"],{"194c":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-card",{attrs:{bordered:!1}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("j-form-container",{attrs:{disabled:e.formDisabled}},[t("a-form",{attrs:{slot:"detail",form:e.form},slot:"detail"},[t("a-row",[t("a-form-item",{attrs:{label:"用户账号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["username"],expression:"[ 'username']",modifiers:{trim:!0}}],attrs:{placeholder:"请输入用户账号",readOnly:!0}})],1),t("a-form-item",{attrs:{label:"学号",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workNo"],expression:"[ 'workNo']"}],attrs:{placeholder:"请输入学号",readOnly:!0}})],1),t("a-form-item",{attrs:{label:"用户姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["realname"],expression:"[ 'realname']",modifiers:{trim:!0}}],attrs:{placeholder:"请输入用户姓名",readOnly:!0}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"STUDENT"===e.role||"TEACHER"===e.role,expression:" role === 'STUDENT' || role === 'TEACHER'"}]},[t("a-form-item",{attrs:{label:"生日",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["birthday"],expression:"[ 'birthday']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1),t("a-form-item",{attrs:{label:"性别",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["sexStr"],expression:"[ 'sexStr']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"学院",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["xyName"],expression:"[ 'xyName']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"专业",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["zyName"],expression:"[ 'zyName']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"STUDENT"===e.role,expression:" role === 'STUDENT'"}]},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"年级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["njName"],expression:"[ 'njName']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"班级",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator.trim",value:["bjName"],expression:"[ 'bjName']",modifiers:{trim:!0}}],attrs:{placeholder:"",readOnly:!0}})],1)],1)],1)],1),e.showFlowSubmitButton?t("a-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[t("a-button",{on:{click:e.submitForm}},[e._v("提 交")])],1):e._e()],1)],1)],1)],1)],1)},o=[],l=t("0fea"),i=t("88bc"),n=t.n(i),s=(t("ca00"),t("c1df")),c=t.n(s),d=(t("4ec3"),t("4360")),u={name:"personal",components:{},props:{formData:{type:Object,default:function(){},required:!1},formBpm:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1}},data:function(){return{form:this.$form.createForm(this),model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{username:{rules:[{required:!0,message:"请输入用户账号!"},{validator:this.validateUsername}]},password:{rules:[{required:!0},{validator:this.validateToNextPassword}]},realname:{rules:[{required:!0,message:"请输入用户名称!"}]},phone:{rules:[{validator:this.validatePhone}]},workNo:{rules:[{required:!0,message:"请输入学号"},{validator:this.validateWorkNo}]}},bjId:"",selectedBj:[],dateFormat:"YYYY-MM-DD",role:"",moment:c.a,url:{add:"/sys/user/add",edit:"/sys/user/edit",queryById:"/sys/user/queryById",userId:"/sys/user/generateUserId"}}},computed:{formDisabled:function(){return!0===this.formBpm?!1!==this.formData.disabled:this.disabled},showFlowSubmitButton:function(){return!0===this.formBpm&&!1===this.formData.disabled}},created:function(){this.showFlowData(),this.init()},methods:{init:function(){var e=this,r=d["a"].getters.userInfo.id,t={userId:r},a=this;Object(l["c"])("/zyf/util/queryUserInfo",t).then((function(r){e.record=r["result"];var t=e.record["sex"];e.record.sexStr="1"===t?"男":"女",e.record.birthday=e.record.birthday.split(" ")[0],a.role=r["result"]["role"],e.edit(e.record)}))},add:function(){this.edit({})},edit:function(e){var r=this;this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0,this.$nextTick((function(){r.form.setFieldsValue(n()(r.model,"username","realname","workNo","sex","sexStr","birthday","bjName","xyName","zyName","njName"))}));var t=function(e){return Object(l["c"])("/bj/zyfBj/queryall",e)};t().then((function(e){r.selectedBj=e.result}))},showFlowData:function(){var e=this;if(!0===this.formBpm){var r={id:this.formData.dataId};Object(l["c"])(this.url.queryById,r).then((function(r){r.success&&e.edit(r.result)}))}},submitForm:function(){var e=this,r=this;this.form.validateFields((function(t,a){if(!t){r.confirmLoading=!0;var o="",i="";e.model.id?(o+=e.url.edit,i="put"):(o+=e.url.add,i="post");var n=Object.assign(e.model,a);r.bjId.length>0&&(n.orgCode=r.bjId),n.selectedroles="1361357450112102402",n.sex||(n.sex=n.sexStr),n.birthday=n.birthday.format(e.dateFormat),Object(l["h"])(o,n,i).then((function(e){e.success?(r.$message.success(e.message),r.$emit("ok")):r.$message.warning(e.message)})).finally((function(){r.confirmLoading=!1}))}}))},popupCallback:function(e){this.form.setFieldsValue(n()(e,"userId","bjId"))}}},m=u,p=t("2877"),f=Object(p["a"])(m,a,o,!1,null,null,null);r["default"]=f.exports},"88bc":function(e,r,t){(function(r){var t=1/0,a=9007199254740991,o="[object Arguments]",l="[object Function]",i="[object GeneratorFunction]",n="[object Symbol]",s="object"==typeof r&&r&&r.Object===Object&&r,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")();function u(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}function m(e,r){var t=-1,a=e?e.length:0,o=Array(a);while(++t<a)o[t]=r(e[t],t,e);return o}function p(e,r){var t=-1,a=r.length,o=e.length;while(++t<a)e[o+t]=r[t];return e}var f=Object.prototype,b=f.hasOwnProperty,h=f.toString,v=d.Symbol,w=f.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,C=Math.max;function j(e,r,t,a,o){var l=-1,i=e.length;t||(t=O),o||(o=[]);while(++l<i){var n=e[l];r>0&&t(n)?r>1?j(n,r-1,t,a,o):p(o,n):a||(o[o.length]=n)}return o}function g(e,r){return e=Object(e),N(e,r,(function(r,t){return t in e}))}function N(e,r,t){var a=-1,o=r.length,l={};while(++a<o){var i=r[a],n=e[i];t(n,i)&&(l[i]=n)}return l}function x(e,r){return r=C(void 0===r?e.length-1:r,0),function(){var t=arguments,a=-1,o=C(t.length-r,0),l=Array(o);while(++a<o)l[a]=t[r+a];a=-1;var i=Array(r+1);while(++a<r)i[a]=t[a];return i[r]=l,u(e,this,i)}}function O(e){return I(e)||S(e)||!!(y&&e&&e[y])}function F(e){if("string"==typeof e||A(e))return e;var r=e+"";return"0"==r&&1/e==-t?"-0":r}function S(e){return B(e)&&b.call(e,"callee")&&(!w.call(e,"callee")||h.call(e)==o)}var I=Array.isArray;function k(e){return null!=e&&q(e.length)&&!D(e)}function B(e){return E(e)&&k(e)}function D(e){var r=T(e)?h.call(e):"";return r==l||r==i}function q(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function T(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}function E(e){return!!e&&"object"==typeof e}function A(e){return"symbol"==typeof e||E(e)&&h.call(e)==n}var U=x((function(e,r){return null==e?{}:g(e,m(j(r,1),F))}));e.exports=U}).call(this,t("c8ba"))}}]);